# Kleio-server token setup

MHK needs a token to access the Kleio server
with privileges to create tokens. This is
called an administration token.

## Getting an admin token

The MHK web app tries to locate the 
the administrator token in the following
order.

1. from environment variable KLEIO_ADMIN_TOKEN
2. from the file `mhk-home/system/conf/mhk.kleio.service.token.admin`
3. from the context attribute `mhk.kleio.service.token.admin`. The context attributes
can be setup in the file `mhk-home/system/conf/mhk_system.properties`
4. from `mhk-home/system/conf/kleio/.bootstrap_token`. This is a short lived
token generated by the kleio service on startup when its token
database is empty. MHK will used
this token to generate a long lived token and store it in the file `mhk-home/system/conf/mhk.kleio.service.token.admin` where
it can be subsequently fetched by
number 2 above.